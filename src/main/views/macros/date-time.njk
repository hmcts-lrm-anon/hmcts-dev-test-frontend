{% macro formatDateTime(dateStr) %}
  {%- if dateStr %}
  {# <div>DEBUG: {{ dateStr }}</div> #}
      {%- set date = dateStr %}
      {%- set time = "" %}
      {%- if dateStr.indexOf('T') != -1 %}
        {%- set parts = dateStr.split('T') %}
        {%- set date = parts[0] %}
        {%- set time = parts[1] %}
      {%- endif %}
  {#<div>DEBUG time: {{ time }}</div>#}
    {%- set d = date.split("-") %}
    {%- if d.length == 3 %}
      {{ d[2] }}/{{ d[1] }}/{{ d[0] }}
        Time: {% if time %}{{ time.slice(0,5) }}{% else %}--:--{% endif %}
    {%- else %}
      {{ dateStr }}
    {%- endif %}
  {%- endif %}
{% endmacro %}
